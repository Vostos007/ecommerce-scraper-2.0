# Dockerfile.dashboard â€” Next.js Dashboard (production)
FROM node:20-bullseye

WORKDIR /app/apps/dashboard

# Install deps first
COPY apps/dashboard/package*.json ./
RUN npm ci

# Copy source and build
COPY apps/dashboard ./
RUN npm run build

EXPOSE 3000

# Healthcheck requires curl
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

CMD ["npm", "run", "start", "--", "-p", "3000"]
